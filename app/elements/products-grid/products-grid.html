<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link href="../../bower_components/core-icon-button/core-icon-button.html" rel="import">


  
<polymer-element name="products-grid">
    <template>
    <link rel="stylesheet" href="products-grid.css">
    <core-animated-pages id="pages" flex selected="0" on-core-animated-pages-transition-end="{{transitionend}}" transitions="cross-fade-all hero-transition">
      <section vertical layout>
        <div id="container" flex horizontal wrap around-justified layout hero-p>
          <template repeat="{{item in items}}">
            <div class="card" horizontal center center-justified layout hero-id="item-{{item}}" hero?="{{$.pages.selected === item + 1 || lastSelected === item + 1}}" on-tap="{{selectView}}"><span cross-fade>{{item}}</span></div>
          </template>
        </div>
      </section>
      <template repeat="{{item in items}}">
        <section vertical layout>
          <div class="view" flex vertical center center-justified layout hero-id="item-{{item}}" hero?="{{$.pages.selected === item + 1 || $.pages.selected === 0}}"><span cross-fade>{{item}}</span></div>
          <core-icon-button icon= 'arrow-back' on-tap="{{back}}"></core-icon-button>
        </section>
      </template>
    </core-animated-pages>
    </template>
  <script>
  Polymer('products-grid', {
	  ready: function() {
		  var count = 50;
	      var items = [];
	      for (var i=0; i < count; i++) {
	        items.push(i);
	      }
	      this.items = items;		  
	  },
	  transitionend: function() {
	        if (this.lastSelected) {
	            this.lastSelected = null;
	          }		  
	  },
	  back: function() {
	        this.lastSelected = this.$.pages.selected;
	        this.$.pages.selected = 0;
	  },
	  selectView: function(e) {
	        var i = e.target.templateInstance.model.item;
	        this.$.pages.selected = i+1;
	  }
  });
  </script>
</polymer-element>
